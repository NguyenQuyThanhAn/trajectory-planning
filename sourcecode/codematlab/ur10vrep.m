clc;clear;
sim=remApi('remoteApi');
sim.simxFinish(-1);

id=sim.simxStart('127.0.0.1',19999,true,true,5000,5);

if (id>-1)
    disp('Connected to remote API server');
    %get the handle of joints
    jointNames={'joint1','joint2','joint3','joint4','joint5'};
    handlesJoint = ones(1,5); 
    startpose = [0, pi/2, 0, pi/2, 0, 0];
    position = [0.5316   -0.3566    1.6010   -1.2444   -0.5316    1.5708
    0.5316   -0.3594    1.6125   -1.2531   -0.5316    1.5708
    0.5316   -0.3672    1.6465   -1.2793   -0.5316    1.5708
    0.5316   -0.3784    1.6991   -1.3207   -0.5316    1.5708
    0.5316   -0.3883    1.7528   -1.3645   -0.5316    1.5708
    0.5316   -0.3965    1.8050   -1.4085   -0.5316    1.5708
    0.5316   -0.4028    1.8557   -1.4529   -0.5316    1.5708
    0.5316   -0.4072    1.9050   -1.4979   -0.5316    1.5708
    0.5316   -0.4094    1.9507   -1.5412   -0.5316    1.5708
    0.5316   -0.4099    1.9789   -1.5690   -0.5316    1.5708
    0.5316   -0.4098    1.9882   -1.5783   -0.5316    1.5708
    0.5275   -0.4069    1.9865   -1.5796   -0.5275    1.5708
    0.5155   -0.3980    1.9813   -1.5833   -0.5155    1.5708
    0.4974   -0.3836    1.9728   -1.5892   -0.4974    1.5708
    0.4794   -0.3680    1.9633   -1.5953   -0.4794    1.5708
    0.4624   -0.3519    1.9533   -1.6014   -0.4624    1.5708
    0.4464   -0.3355    1.9428   -1.6073   -0.4464    1.5708
    0.4313   -0.3187    1.9318   -1.6130   -0.4313    1.5708
    0.4178   -0.3025    1.9209   -1.6184   -0.4178    1.5708
    0.4096   -0.2921    1.9137   -1.6216   -0.4096    1.5708
    0.4069   -0.2886    1.9113   -1.6227   -0.4069    1.5708
    0.4069   -0.2891    1.9023   -1.6132   -0.4069    1.5708
    0.4069   -0.2899    1.8749   -1.5850   -0.4069    1.5708
    0.4069   -0.2895    1.8304   -1.5408   -0.4069    1.5708
    0.4069   -0.2871    1.7821   -1.4949   -0.4069    1.5708
    0.4069   -0.2828    1.7322   -1.4494   -0.4069    1.5708
    0.4069   -0.2765    1.6807   -1.4042   -0.4069    1.5708
    0.4069   -0.2682    1.6274   -1.3591   -0.4069    1.5708
    0.4069   -0.2587    1.5751   -1.3164   -0.4069    1.5708
    0.4069   -0.2518    1.5411   -1.2893   -0.4069    1.5708
    0.4069   -0.2493    1.5296   -1.2803   -0.4069    1.5708
    0.3999   -0.2462    1.5273   -1.2812   -0.3999    1.5708
    0.3794   -0.2364    1.5202   -1.2838   -0.3794    1.5708
    0.3485   -0.2200    1.5079   -1.2879   -0.3485    1.5708
    0.3180   -0.2016    1.4938   -1.2922   -0.3180    1.5708
    0.2896   -0.1819    1.4783   -1.2963   -0.2896    1.5708
    0.2630   -0.1613    1.4615   -1.3003   -0.2630    1.5708
    0.2382   -0.1396    1.4435   -1.3039   -0.2382    1.5708
    0.2161   -0.1182    1.4251   -1.3069   -0.2161    1.5708
    0.2029   -0.1042    1.4129   -1.3086   -0.2029    1.5708
    0.1986   -0.0995    1.4087   -1.3092   -0.1986    1.5708
    0.2013   -0.0984    1.4077   -1.3093   -0.2013    1.5708
    0.2092   -0.0950    1.4047   -1.3096   -0.2092    1.5708
    0.2217   -0.0896    1.3998   -1.3102   -0.2217    1.5708
    0.2346   -0.0837    1.3945   -1.3108   -0.2346    1.5708
    0.2475   -0.0778    1.3891   -1.3113   -0.2475    1.5708
    0.2602   -0.0718    1.3836   -1.3118   -0.2602    1.5708
    0.2728   -0.0656    1.3779   -1.3123   -0.2728    1.5708
    0.2846   -0.0597    1.3724   -1.3127   -0.2846    1.5708
    0.2920   -0.0559    1.3688   -1.3129   -0.2920    1.5708
    0.2945   -0.0546    1.3676   -1.3130   -0.2945    1.5708
    0.2960   -0.0584    1.3711   -1.3128   -0.2960    1.5708
    0.3005   -0.0695    1.3814   -1.3120   -0.3005    1.5708
    0.3081   -0.0869    1.3974   -1.3105   -0.3081    1.5708
    0.3163   -0.1050    1.4136   -1.3085   -0.3163    1.5708
    0.3250   -0.1229    1.4292   -1.3063   -0.3250    1.5708
    0.3342   -0.1406    1.4443   -1.3037   -0.3342    1.5708
    0.3438   -0.1581    1.4589   -1.3008   -0.3438    1.5708
    0.3534   -0.1744    1.4722   -1.2978   -0.3534    1.5708
    0.3598   -0.1846    1.4804   -1.2958   -0.3598    1.5708
    0.3619   -0.1880    1.4831   -1.2951   -0.3619    1.5708
    0.3619   -0.1903    1.4946   -1.3043   -0.3619    1.5708
    0.3619   -0.1969    1.5287   -1.3318   -0.3619    1.5708
    0.3619   -0.2058    1.5810   -1.3752   -0.3619    1.5708
    0.3619   -0.2133    1.6341   -1.4208   -0.3619    1.5708
    0.3619   -0.2189    1.6853   -1.4665   -0.3619    1.5708
    0.3619   -0.2224    1.7348   -1.5124   -0.3619    1.5708
    0.3619   -0.2240    1.7826   -1.5586   -0.3619    1.5708
    0.3619   -0.2236    1.8266   -1.6030   -0.3619    1.5708
    0.3619   -0.2223    1.8536   -1.6313   -0.3619    1.5708
    0.3619   -0.2217    1.8625   -1.6408   -0.3619    1.5708
    0.3598   -0.2181    1.8597   -1.6416   -0.3598    1.5708
    0.3534   -0.2071    1.8512   -1.6441   -0.3534    1.5708
    0.3438   -0.1896    1.8374   -1.6478   -0.3438    1.5708
    0.3342   -0.1711    1.8225   -1.6514   -0.3342    1.5708
    0.3250   -0.1524    1.8070   -1.6546   -0.3250    1.5708
    0.3163   -0.1337    1.7912   -1.6575   -0.3163    1.5708
    0.3081   -0.1148    1.7748   -1.6600   -0.3081    1.5708
    0.3005   -0.0968    1.7588   -1.6620   -0.3005    1.5708
    0.2960   -0.0854    1.7485   -1.6631   -0.2960    1.5708
    0.2945   -0.0816    1.7451   -1.6635   -0.2945    1.5708
    0.2935   -0.0871    1.7454   -1.6583   -0.2935    1.5708
    0.2905   -0.1035    1.7461   -1.6426   -0.2905    1.5708
    0.2856   -0.1292    1.7465   -1.6172   -0.2856    1.5708
    0.2801   -0.1558    1.7457   -1.5899   -0.2801    1.5708
    0.2742   -0.1818    1.7437   -1.5619   -0.2742    1.5708
    0.2679   -0.2073    1.7406   -1.5333   -0.2679    1.5708
    0.2611   -0.2321    1.7363   -1.5042   -0.2611    1.5708
    0.2543   -0.2552    1.7312   -1.4760   -0.2543    1.5708
    0.2497   -0.2694    1.7274   -1.4580   -0.2497    1.5708
    0.2481   -0.2741    1.7261   -1.4520   -0.2481    1.5708
    0.2514   -0.2727    1.7251   -1.4524   -0.2514    1.5708
    0.2609   -0.2685    1.7221   -1.4536   -0.2609    1.5708
    0.2759   -0.2617    1.7172   -1.4555   -0.2759    1.5708
    0.2914   -0.2545    1.7119   -1.4575   -0.2914    1.5708
    0.3067   -0.2471    1.7066   -1.4594   -0.3067    1.5708
    0.3217   -0.2397    1.7011   -1.4614   -0.3217    1.5708
    0.3365   -0.2322    1.6955   -1.4633   -0.3365    1.5708
    0.3504   -0.2250    1.6900   -1.4650   -0.3504    1.5708
    0.3590   -0.2204    1.6865   -1.4661   -0.3590    1.5708
    0.3619   -0.2189    1.6853   -1.4665   -0.3619    1.5708
    0.3598   -0.2154    1.6826   -1.4673   -0.3598    1.5708
    0.3534   -0.2048    1.6744   -1.4696   -0.3534    1.5708
    0.3438   -0.1879    1.6611   -1.4732   -0.3438    1.5708
    0.3342   -0.1700    1.6466   -1.4766   -0.3342    1.5708
    0.3250   -0.1518    1.6316   -1.4797   -0.3250    1.5708
    0.3163   -0.1336    1.6161   -1.4825   -0.3163    1.5708
    0.3081   -0.1151    1.6001   -1.4850   -0.3081    1.5708
    0.3005   -0.0974    1.5844   -1.4870   -0.3005    1.5708
    0.2960   -0.0862    1.5743   -1.4881   -0.2960    1.5708
    0.2945   -0.0824    1.5709   -1.4884   -0.2945    1.5708
    0.2913   -0.0815    1.5653   -1.4838   -0.2913    1.5708
    0.2817   -0.0784    1.5485   -1.4701   -0.2817    1.5708
    0.2668   -0.0729    1.5212   -1.4482   -0.2668    1.5708
    0.2513   -0.0665    1.4917   -1.4252   -0.2513    1.5708
    0.2359   -0.0592    1.4614   -1.4021   -0.2359    1.5708
    0.2208   -0.0512    1.4302   -1.3789   -0.2208    1.5708
    0.2059   -0.0425    1.3981   -1.3556   -0.2059    1.5708
    0.1919   -0.0334    1.3667   -1.3332   -0.1919    1.5708
    0.1832   -0.0273    1.3464   -1.3190   -0.1832    1.5708
    0.1803   -0.0252    1.3395   -1.3143   -0.1803    1.5708
    0.1828   -0.0242    1.3385   -1.3143   -0.1828    1.5708
    0.1901   -0.0211    1.3355   -1.3144   -0.1901    1.5708
    0.2015   -0.0160    1.3305   -1.3145   -0.2015    1.5708
    0.2135   -0.0106    1.3251   -1.3146   -0.2135    1.5708
    0.2253   -0.0050    1.3197   -1.3146   -0.2253    1.5708
    0.2371    0.0006    1.3140   -1.3146   -0.2371    1.5708
    0.2487    0.0064    1.3083   -1.3146   -0.2487    1.5708
    0.2597    0.0119    1.3027   -1.3146   -0.2597    1.5708
    0.2666    0.0155    1.2990   -1.3145   -0.2666    1.5708
    0.2688    0.0167    1.2978   -1.3145   -0.2688    1.5708
    0.2676    0.0205    1.2939   -1.3144   -0.2676    1.5708
    0.2639    0.0323    1.2818   -1.3141   -0.2639    1.5708
    0.2582    0.0510    1.2623   -1.3132   -0.2582    1.5708
    0.2525    0.0709    1.2410   -1.3119   -0.2525    1.5708
    0.2471    0.0910    1.2191   -1.3101   -0.2471    1.5708
    0.2418    0.1114    1.1964   -1.3078   -0.2418    1.5708
    0.2368    0.1320    1.1730   -1.3050   -0.2368    1.5708
    0.2322    0.1519    1.1500   -1.3019   -0.2322    1.5708
    0.2293    0.1646    1.1351   -1.2997   -0.2293    1.5708
    0.2284    0.1688    1.1300   -1.2989   -0.2284    1.5708
    0.2289    0.1667    1.1326   -1.2993   -0.2289    1.5708
    0.2303    0.1604    1.1401   -1.3004   -0.2303    1.5708
    0.2325    0.1503    1.1518   -1.3021   -0.2325    1.5708
    0.2349    0.1399    1.1640   -1.3038   -0.2349    1.5708
    0.2374    0.1294    1.1759   -1.3054   -0.2374    1.5708
    0.2399    0.1191    1.1877   -1.3068   -0.2399    1.5708
    0.2425    0.1088    1.1993   -1.3081   -0.2425    1.5708
    0.2449    0.0991    1.2101   -1.3092   -0.2449    1.5708
    0.2465    0.0930    1.2168   -1.3099   -0.2465    1.5708
    0.2471    0.0910    1.2191   -1.3101   -0.2471    1.5708
    0.2471    0.0887    1.2313   -1.3199   -0.2471    1.5708
    0.2471    0.0822    1.2671   -1.3493   -0.2471    1.5708
    0.2471    0.0737    1.3214   -1.3952   -0.2471    1.5708
    0.2471    0.0670    1.3759   -1.4428   -0.2471    1.5708
    0.2471    0.0624    1.4276   -1.4900   -0.2471    1.5708
    0.2471    0.0599    1.4770   -1.5368   -0.2471    1.5708
    0.2471    0.0594    1.5241   -1.5835   -0.2471    1.5708
    0.2471    0.0608    1.5669   -1.6277   -0.2471    1.5708
    0.2471    0.0627    1.5929   -1.6556   -0.2471    1.5708
    0.2471    0.0635    1.6014   -1.6649   -0.2471    1.5708];
% for i=1:17
%     position(i,:)=position(i,:)+startpose;
% end
    for i = 1:5
        [r, handlesJoint(i)] = sim.simxGetObjectHandle(id,jointNames{i}, sim.simx_opmode_oneshot_wait); 
    end
%     %set start position
%     
%     for i =1:5
%         sim.simxSetJointTargetPosition(id,handlesJoint(i),startpose(i),sim.simx_opmode_oneshot);
%     end
%     pause(4);
    %set first position
    
    for i =1:5
        sim.simxSetJointTargetPosition(id,handlesJoint(i),position(1,i),sim.simx_opmode_oneshot);
    end
    pause(4)
    %set position
    for i =2:161
        for j =1:5
            sim.simxSetJointTargetPosition(id,handlesJoint(j),position(i,j),sim.simx_opmode_oneshot);
        end
        pause(4);
    end
     
    
end
sim.delete();